# Данный лаунчер реализован с использованием среды разработки на C# Visual Studio 2022

Лаунчер разбит на 2 отдельных проекта **FoxLauncherWPF** - сам лаунчер написанный на WPF. **FoxLaucherWeb** - серверная часть написанная на ASP.Net

## **КОНФИГУРАЦИЯ СИСТЕМЫ**

Для **СТАБИЛЬНОЙ** работы веб сервера (приложение) я использовал веб сервер (VDS) со следующей конфигурацией: 1 x 3.3 ГГц CPU • 2 Гб RAM • 30 Гб NVMe. 
Размер RAM (ОЗУ) и диска а также частота процессора и тип диска на Ваше усмотрение.

### **НАСТРОЙКА СИСТЕМЫ ВЕБ СЕРВЕРА**

Я здесь перечислю пакеты которые я ставил на VDS.

**MySQL** - сервер базы данных для хранения названий клиентов, их имён и локального пути (не обязательно)

**nginx** - прокси сервер для доступа к серверу по HTTP 

**python3**, **pip3**, **mysql-python** - Python для обработки запросов (не обязательно если Вы будете заполнять БД (база данных) из консоли самого сервера MySQL)

После установки пакетов перейдём к настройке БД и прокси сервера.

#### **НАСТРОЙКА ПРОКСИ СЕРВЕРА**

Файл конфигурации обычно находится по пути **/etc/nginx/nginx.conf**. В него нужно добавить следующий конфигурационный блок:

```nginx
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    server_name _;

    root /var/www/html/;
    index index.html index.htm;

    location / {
        autoindex on;
        try_files $uri $uri/ =404;
        allow all;
    }
}

server {
    listen 80;
    server_name _;

    location / {
        proxy_pass http://localhost:5000; 
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection keep-alive;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

Разберём нужные данные в блоках:

root /var/www/html/; - путь к папке с файлами (папками) для прокси сервера из которой будут скачиваться файлы. Пример структуры из веб: ![image](https://github.com/MehanikTMYT/FoxLaucherWPF/assets/29605858/10edc132-b617-45e4-9a22-3c58cc5d25a9)
 Поменяйте на нужную и не забудьте добавить права +X (chmod +X путь).
**proxy_pass http://localhost:5000;** - адрес и порт прослушки веб сервера.
После изменений перезагрузите пакет (гуглите как).

#### НАСТРОЙКА БАЗЫ ДАННЫХ
Путь для базы данных у каждого свой. Нужно просмотреть каждый файл с расширением .conf в /etc/mysql и найти строчку вида **bind-address = 0.0.0.0** и раскомментировать (убрать # (решётку)) или продублировать без комментария. Данная строчка отвечает за разрешение прослушки базы данных с внешних адресов (не с самого сервера).

После изменений перезагрузите пакет (гуглите как).

Затем нужно создать саму базу данных, пользователя (с внешним доступом), задать ему пароль, создать таблицу в базе данных для хранения данных.

Создание базы данных и пользователя
Примерные команды для создания базы данных и пользователя:

```sql
CREATE DATABASE <название_базы_данных>;
CREATE USER '<имя_пользователя>'@'%' IDENTIFIED BY '<пароль>';
GRANT SELECT ON <название_базы_данных>.* TO '<имя_пользователя>'@'%';
```
измените <название_базы_данных>, <имя_пользователя>, <пароль> на Ваши

#### НАСТРОЙКА FoxLauncherWPF

![image](https://github.com/MehanikTMYT/FoxLaucherWPF/assets/29605858/49d4cf34-d35c-49b8-9a00-520d86c8a8c2)

Структура appsettings.json следующая:

```json
{
  "Database": {
    "DBName": "Введите название базы данных",
    "UserDB": "Введите имя пользователя для базы данных",
    "PasswordDB": "Введите пароль пользователя для базы данных"
  },
  "Server": {
    "BaseUrl": "Введите адрес"
  }
}
```
Просто нужно заполнить данными в соответствующих полях.

НАСТРОЙКА FoxLaucherWeb
![image](https://github.com/MehanikTMYT/FoxLaucherWPF/assets/29605858/621ef723-ab57-402e-99f7-317f82caa990)
Структура appsettings.json следующая:

```json
{
  "FoxLauncherWeb_HostAddress": "http://localhost:5000",
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ProfilesPath": "Введите путь к профилям клиентов",
  "AllowedHosts": "*"
}
```
Здесь нужно изменить только строчку "ProfilesPath": "Введите путь к профилям клиентов".

Сам лаунчер формирует пути для клиента (локальные не на сервере) по шаблону ВЕРСИЯ/game ВЕРСИЯ/data в data хранятся архивы, в game - их распакованная версия и доп файлы с папками. ВАЖНО, ЧТОБЫ НА СЕРВЕРЕ СТРУКТУРА КЛИЕНТА БЫЛА ТАКАЯ ЖЕ. ВЕБ СЕРВЕР (ПРИЛОЖЕНИЕ) сам создаст архив.
